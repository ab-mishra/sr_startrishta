<?phpsession_start();require_once 'Facebook/autoload.php';require_once("../classes/user_class.php");$fb = new \Facebook\Facebook([  'app_id' => APP_ID,  'app_secret' => APP_SECRET,  'default_graph_version' => 'v2.9'  //'default_access_token' => '{access-token}', // optional]);$userObj = new User();$helper = $fb->getRedirectLoginHelper();try {  $accessToken = $helper->getAccessToken();} catch(\Facebook\Exceptions\FacebookResponseException $e) {  // When Graph returns an error  //echo 'Graph returned an error: ' . $e->getMessage();  echo "<script>     window.location.href='".SITEURL."home.php?access=".base64_encode("fb_graph_error")."';     </script>";  exit;} catch(\Facebook\Exceptions\FacebookSDKException $e) {  // When validation fails or other local issues  //echo 'Facebook SDK returned an error: ' . $e->getMessage();  echo "<script>     window.location.href='".SITEURL."home.php';     </script>";  exit;}if (isset($accessToken)) {    // Logged in!    $_SESSION['facebook_access_token'] = (string) $accessToken;    // Now you can redirect to another page and use the    // access token from $_SESSION['facebook_access_token']}// Am Successfully Logged In Heretry {  // Returns a `Facebook\FacebookResponse` object  $response = $fb->get('/me?fields=id,name,first_name,last_name,email,age_range,link,gender,locale,timezone,updated_time,verified,picture', $accessToken);} catch(Facebook\Exceptions\FacebookResponseException $e) {  //echo 'Graph returned an error: ' . $e->getMessage();  echo "<script>     window.location.href='".SITEURL."home.php?access=".base64_encode("fb_graph_error")."';     </script>";  exit;} catch(Facebook\Exceptions\FacebookSDKException $e) {  //echo 'Facebook SDK returned an error: ' . $e->getMessage();  echo "<script>     window.location.href='".SITEURL."home.php?access=".base64_encode("fb_error")."';     </script>";  exit;}$me = $response->getGraphUser();$albums = $fb->get('/me/albums', $accessToken)->getGraphEdge()->asArray();$photos = $fb->get('/me/photos?fields=picture.type(large).height(500).width(500)', $accessToken)->getGraphEdge()->asArray();echo $_SERVER['HTTP_USER_AGENT'];foreach($photos as $picture) {  $img = parse_url($picture['picture']);      $path = explode('/', $img['path']);      echo $filename = end($path);echo "-- Img <br>File --- ".$picture['picture']."<br>";  define('DIRECTORY', '/upload/photo');      copy($picture['picture'], DIRECTORY . '/'.$filename);     echo "Dir ------ ".DIRECTORY . '/'.$filename."<br><br>";       /*if(file_put_contents(DIRECTORY . '/'.$filename, $content)){        echo "Dir123 ------ ".DIRECTORY . '/'.$filename."<br><br>";      }else{        echo "Content ----- ".$content."<br><br>";      }*/      //exit;}//$resp = $userObj->importFbPics($me, $photos);//echo $resp;/*if($resp == 1){  echo "<script>window.location.href='".SITEURL."photos.php'</script>";}*///echo $fbpics = $userObj->importFbPics($albums);?>